!function(){"use strict";var e=document.querySelector(".profile__edit-button"),t=document.querySelector(".profile__add-button"),r=document.querySelector(".popup__form_type_edit"),n=document.querySelector(".popup__form_type_add-image"),o=document.querySelector(".popup__form_type_profile-image"),i=document.querySelector(".profile__user"),u=document.querySelector(".profile__profession"),a=document.querySelector(".profile__image"),c=document.querySelector(".popup__button_type_delete"),l=document.querySelector(".popup__button_type_edit"),s=document.querySelector(".popup__button_type_profile-image"),f=document.querySelector(".profile__avatar-overlay"),p=document.querySelector(".popup__create-card-button"),y={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}var m=function(){function e(t,r){var n=t.data,o=t.handleCardClick,i=t.handleDeleteClick,u=t.handleLikeAdd,a=t.handleLikeDelete,c=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._link=n.link,this._template=r,this._id=n._id,this._likesCount=n.likes.length,this._ownerId=n.owner._id,this._user=c,this._handleCardClick=o,this._handleDeleteClick=i,this._handleLikeAdd=u,this._handleLikeDelete=a,this._likesArray=n.likes,this._cardLikes=n.likes.length}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".card").cloneNode(!0)}},{key:"addHeart",value:function(){var e=this._element.querySelector(".card__like-button"),t=this._element.querySelector(".card__like-counter");e.classList.add("card__like-button_on"),t.textContent=this._likesArray.length}},{key:"removeHeart",value:function(){var e=this._element.querySelector(".card__like-button"),t=this._element.querySelector(".card__like-counter");e.classList.remove("card__like-button_on"),t.textContent=this._likesArray.length,0===this._cardLikes&&(t.textContent="")}},{key:"_deleteButton",value:function(){this._element.querySelector(".card__delete-button").closest(".card").remove()}},{key:"updateLikes",value:function(e){return this._likesArray=e}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__like-button").addEventListener("click",(function(){e._likesArray.some((function(t){return t._id===e._user}))?e._handleLikeDelete({id:e._id}):e._handleLikeAdd({id:e._id})})),this._element.querySelector(".card__delete-button").addEventListener("click",(function(){e._handleDeleteClick({id:e._id})})),this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})})),this._ownerId!==this._user&&this._element.querySelector(".card__delete-button").remove()}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".card__image");return this._element.querySelector(".card__title").textContent=this._name,t.src=this._link,t.setAttribute("alt",this._name),this._cardLikes>0?this._element.querySelector(".card__like-counter").textContent=this._cardLikes:this._element.querySelector(".card__like-counter").textContent="",this._likesArray.some((function(t){return t._id===e._user}))?this._element.querySelector(".card__like-button").classList.add("card__like-button_on"):this._element.querySelector(".card__like-button").classList.remove("card__like-button_on"),this._element}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function b(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){var t=function(e,t){if("object"!==_(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===_(t)?t:String(t)}var k=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"_setEventListeners",(function(){n._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n._toggleButtonState()}))}))})),b(this,"enableValidation",(function(){n._formElement.addEventListener("submit",(function(e){e.preventDefault()})),n._setEventListeners()})),this._formElement=t,this._inputSelector=r.inputSelector,this._submitButtonSelector=r.submitButtonSelector,this._inactiveButtonClass=r.inactiveButtonClass,this._inputErrorClass=r.inputErrorClass,this._errorClass=r.errorClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var r=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),r.classList.add(this._errorClass),r.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t),t.value=""}))}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===g(o)?o:String(o)),n)}var o}var w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button")?e.close():t.target.closest(".popup")||e.close()}))}}])&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===O(o)?o:String(o)),n)}var o}function j(){return j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},j.apply(this,arguments)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupSelector,n=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r))._handleFormSubmit=n,t._inputList=t._popupElement.querySelectorAll(".popup__input"),t._formElement=t._popupElement.querySelector(".popup__form"),t._submitButton=o,t}return t=u,(r=[{key:"close",value:function(){j(P(u.prototype),"close",this).call(this),this.renderLoading(!1),this._formElement.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Guardando...":this._submitButton.dataset.textcontent}},{key:"setEventListeners",value:function(){var e=this;j(P(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit(e._getInputValues())}))}}])&&L(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(w);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},B.apply(this,arguments)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(n);if(o){var r=A(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t,r=e.popupSelector,n=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,r))._handleFormSubmit=n,t._submitButton=o,t}return t=u,(r=[{key:"close",value:function(){B(A(u.prototype),"close",this).call(this),this.renderLoading(!1)}},{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Borrando...":this._submitButton.dataset.textcontent}},{key:"setEventListeners",value:function(){var e=this;B(A(u.prototype),"setEventListeners",this).call(this),this._popupElement.querySelector(".popup__button").addEventListener("click",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit()}))}}])&&T(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(w);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}function V(){return V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},V.apply(this,arguments)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(n);if(o){var r=N(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===x(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._image=t._popupElement.querySelector(".popup__image"),t._title=t._popupElement.querySelector(".popup__caption"),t}return t=u,(r=[{key:"open",value:function(e){var t=e.link,r=e.name;this._image.src=t,this._title.textContent=r,this._image.setAttribute("alt",r),V(N(u.prototype),"open",this).call(this)}}])&&D(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(w);function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==G(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===G(o)?o:String(o)),n)}var o}var z=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"renderer",value:function(){var e=this;this._renderedItems.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"addCards",value:function(e){this._container.prepend(e)}}])&&J(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}var Q=function(){function e(t){var r=t.userName,n=t.userOcupation,o=t.userAvatar,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=r,this._userOcupation=n,this._userId=i,this._userAvatar=o}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{userName:this._userName.textContent,userOcupation:this._userOcupation.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,r=e.userocupation;this._userName.textContent=t,this._userOcupation.textContent=r}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}}])&&K(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==W(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===W(o)?o:String(o)),n)}var o}var Y=new(function(){function e(t){var r=t.baseUrl,n=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=r,this._headers=n}var t,r;return t=e,(r=[{key:"_returnRes",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getCardList",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{method:"GET",headers:this._headers}).then((function(t){return e._returnRes(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{method:"GET",headers:this._headers}).then((function(t){return e._returnRes(t)}))}},{key:"setUserInfo",value:function(e){var t=this,r=e.name,n=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:r,about:n})}).then((function(e){return t._returnRes(e)})).catch((function(e){return console.log(e)}))}},{key:"addCard",value:function(e){var t=this,r=e.name,n=e.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:r,link:n})}).then((function(e){return t._returnRes(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._returnRes(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._returnRes(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return t._returnRes(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._returnRes(e)}))}}])&&X(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://around.nomoreparties.co/v1/web_es_cohort_04",headers:{authorization:"7b89216e-03f6-4244-8235-930eb464c231","Content-Type":"application/json"}}),Z=new k(r,y),$=new k(n,y),ee=new k(o,y);Z.enableValidation(),$.enableValidation(),ee.enableValidation();var te=new H(".popup_preview_image");te.setEventListeners();var re=new q({popupSelector:".popup_edit_profile",handleFormSubmit:function(e){Y.setUserInfo({name:e.name,about:e.about}).then((function(e){ne.setUserInfo({username:e.name,userocupation:e.about}),re.close()})).catch((function(e){return console.log(e)}))},submitButton:l});re.setEventListeners();var ne=new Q({userName:i,userOcupation:u,userAvatar:a});e.addEventListener("click",(function(){re.open(),Z.resetValidation()})),Y.getUserInfo().then((function(e){ne.setUserInfo({username:e.name,userocupation:e.about}),ne.setUserAvatar(e.avatar),ne.userId=e._id})).then((function(){Y.getCardList().then((function(e){var r=new z({items:e,renderer:function(e){var t=ue(e);r.addCards(t)}},".cards__container");r.renderer();var n=new q({popupSelector:".popup_add_card",handleFormSubmit:function(e){Y.addCard({name:e.title,link:e["image-link"]}).then((function(e){var t=ue(e);r.addItem(t),n.close()})).catch((function(e){return console.log(e)}))},submitButton:p});n.setEventListeners(),t.addEventListener("click",(function(){n.open(),$.resetValidation()}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}));var oe=new q({popupSelector:".popup_image_profile",handleFormSubmit:function(e){var t=e["image-link"];Y.setUserAvatar(t).then((function(){ne.setUserAvatar(t),oe.close()})).catch((function(e){return console.log(e)}))},submitButton:s});oe.setEventListeners(),f.addEventListener("click",(function(){oe.open(),ee.resetValidation()}));var ie=new U({popupSelector:".popup_delete_card",submitButton:c});function ue(e){var t=new m({data:e,handleCardClick:function(e){var t=e.name,r=e.link;te.open({name:t,link:r})},handleDeleteClick:function(e){var r=e.id;ie.open(),ie.setSubmitAction((function(){Y.removeCard(r).then((function(){ie.close(),t._deleteButton()})).catch((function(e){return console.log(e)}))}))},handleLikeAdd:function(e){var r=e.id;Y.addLike(r).then((function(e){t.updateLikes(e.likes),t.addHeart()})).catch((function(e){return console.log(e)}))},handleLikeDelete:function(e){var r=e.id;Y.removeLike(r).then((function(e){t.updateLikes(e.likes),t.removeHeart()})).catch((function(e){return console.log(e)}))},userId:ne.userId},".card-template");return t.generateCard()}ie.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxHQUNmb0YsRUFDR3VELFFBQVEzSSxHQUNSaUcsTUFBSyxTQUFDUixHQUNMOEMsRUFBUUssWUFBWW5ELEVBQUlsSCxPQUN4QmdLLEVBQVFNLFVBQ1YsSUFDQ3RDLE9BQU0sU0FBQ0MsR0FBRyxPQUFLQyxRQUFRQyxJQUFJRixFQUFJLEdBQ3BDLEVBQ0EzSSxpQkFBa0IsWUFBVSxJQUFSbUMsRUFBRSxFQUFGQSxHQUNsQm9GLEVBQ0cwRCxXQUFXOUksR0FDWGlHLE1BQUssU0FBQ1IsR0FDTDhDLEVBQVFLLFlBQVluRCxFQUFJbEgsT0FDeEJnSyxFQUFRUSxhQUNWLElBQ0N4QyxPQUFNLFNBQUNDLEdBQUcsT0FBS0MsUUFBUUMsSUFBSUYsRUFBSSxHQUNwQyxFQUNBMUksT0FBUXdKLEdBQVl4SixRQUV0QixrQkFFRixPQUFPeUssRUFBUVMsY0FDakIsQ0E1Q0FWLEdBQWdCcEIsbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvY2FyZHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9mb3JtVmFsaWRhdG9ycy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL3BvcHVwRGVsZXRlSW1hZ2VzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfZXNwLy4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9lc3AvLi9zcmMvY29tcG9uZW50cy9zZWN0aW9ucy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL3VzZXJJbmZvcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2VzcC8uL3NyYy9jb21wb25lbnRzL2FwaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVmFyaWFibGVzXHJcblxyXG5leHBvcnQgY29uc3Qgb3BlbkZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcblxyXG5leHBvcnQgY29uc3Qgb3BlbkNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtX3R5cGVfZWRpdCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1JbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybV90eXBlX2FkZC1pbWFnZScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm1fdHlwZV9wcm9maWxlLWltYWdlJyk7XHJcblxyXG4vL2V4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfbmFtZScpO1xyXG5cclxuLy9leHBvcnQgY29uc3QgaW5wdXRPY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X3R5cGVfYWJvdXQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdXNlcicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVQcm9mZXNzaW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3Byb2Zlc3Npb24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b25fdHlwZV9kZWxldGUnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uX3R5cGVfZWRpdCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uX3R5cGVfcHJvZmlsZS1pbWFnZScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZU92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLW92ZXJsYXknKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jcmVhdGUtY2FyZC1idXR0b24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ1ZhbGxlIGRlIFlvc2VtaXRlJyxcclxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ0xhZ28gTG91aXNlJyxcclxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ01vbnRhw7FhcyBDYWx2YXMnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnTGF0ZW1hcicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGcnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ1BhcnF1ZSBOYWNpb25hbCBkZSBsYSBWYW5vaXNlJyxcclxuICAgIGxpbms6ICdodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZycsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnTGFnbyBkaSBCcmFpZXMnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnJyxcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3JfdmlzaWJsZScsXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAge2RhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VBZGQsIGhhbmRsZUxpa2VEZWxldGUsIHVzZXJJZH0sXHJcbiAgICB0ZW1wbGF0ZVxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX3VzZXIgPSB1c2VySWQ7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUFkZCA9IGhhbmRsZUxpa2VBZGQ7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlRGVsZXRlID0gaGFuZGxlTGlrZURlbGV0ZTtcclxuICAgIHRoaXMuX2xpa2VzQXJyYXkgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBhZGRIZWFydCgpIHtcclxuICAgIGNvbnN0IGhlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgIGNvbnN0IGhlYXJ0TnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcblxyXG4gICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fb24nKTtcclxuICAgIGhlYXJ0TnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNBcnJheS5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICByZW1vdmVIZWFydCgpIHtcclxuICAgIGNvbnN0IGhlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgIGNvbnN0IGhlYXJ0TnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XHJcblxyXG4gICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZS1idXR0b25fb24nKTtcclxuICAgIGhlYXJ0TnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXNBcnJheS5sZW5ndGg7XHJcbiAgICBpZiAodGhpcy5fY2FyZExpa2VzID09PSAwKSB7XHJcbiAgICAgIGhlYXJ0TnVtYmVyLnRleHRDb250ZW50ID0gJyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfZGVsZXRlQnV0dG9uKCkge1xyXG4gICAgY29uc3QgdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XHJcbiAgICB0cmFzaEJ1dHRvbi5jbG9zZXN0KCcuY2FyZCcpLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZXMocmVzQXJyYXkpIHtcclxuICAgIHJldHVybiAodGhpcy5fbGlrZXNBcnJheSA9IHJlc0FycmF5KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICB0aGlzLl9saWtlc0FycmF5LnNvbWUoKGxpa2UpID0+IHtcclxuICAgICAgICAgIHJldHVybiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlcjtcclxuICAgICAgICB9KVxyXG4gICAgICApIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlRGVsZXRlKHtcclxuICAgICAgICAgIGlkOiB0aGlzLl9pZCxcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQWRkKHtcclxuICAgICAgICAgIGlkOiB0aGlzLl9pZCxcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayh7XHJcbiAgICAgICAgaWQ6IHRoaXMuX2lkLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PlxyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soe1xyXG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXHJcbiAgICAgICAgbGluazogdGhpcy5fbGluayxcclxuICAgICAgfSlcclxuICAgICk7XHJcblxyXG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXIpIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpLnJlbW92ZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgdGhpcy5fbmFtZSk7XHJcblxyXG4gICAgaWYgKHRoaXMuX2NhcmRMaWtlcyA+IDApIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkTGlrZXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKS50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChcclxuICAgICAgdGhpcy5fbGlrZXNBcnJheS5zb21lKChsaWtlKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGxpa2UuX2lkID09PSB0aGlzLl91c2VyO1xyXG4gICAgICB9KVxyXG4gICAgKSB7XHJcbiAgICAgIGNvbnN0IGhlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fb24nKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IGhlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcclxuICAgICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9fbGlrZS1idXR0b25fb24nKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihmb3JtRWxlbWVudCwgc2VsZWN0b3JzKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dCk7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfTtcclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfX2Nsb3NlLWJ1dHRvbicpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfSBlbHNlIGlmICghZXZ0LnRhcmdldC5jbG9zZXN0KCcucG9wdXAnKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7cG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgc3VibWl0QnV0dG9ufSkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbjtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAnR3VhcmRhbmRvLi4uJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi5kYXRhc2V0LnRleHRjb250ZW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL3BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioe3BvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQsIHN1Ym1pdEJ1dHRvbn0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSBzdWJtaXRCdXR0b247XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgc2V0U3VibWl0QWN0aW9uKGFjdGlvbikge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGFjdGlvbjtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdCb3JyYW5kby4uLic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b24uZGF0YXNldC50ZXh0Y29udGVudDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vcG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcclxuICB9XHJcblxyXG4gIG9wZW4oe2xpbmssIG5hbWV9KSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKCdhbHQnLCBuYW1lKTtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3Ioe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIHJlbmRlcmVyKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkcyhlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHt1c2VyTmFtZSwgdXNlck9jdXBhdGlvbiwgdXNlckF2YXRhciwgdXNlcklkfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZTtcclxuICAgIHRoaXMuX3VzZXJPY3VwYXRpb24gPSB1c2VyT2N1cGF0aW9uO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5fdXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJOYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgdXNlck9jdXBhdGlvbjogdGhpcy5fdXNlck9jdXBhdGlvbi50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICBjb25zdCB7dXNlcm5hbWUsIHVzZXJvY3VwYXRpb259ID0gZGF0YTtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gdXNlcm5hbWU7XHJcbiAgICB0aGlzLl91c2VyT2N1cGF0aW9uLnRleHRDb250ZW50ID0gdXNlcm9jdXBhdGlvbjtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XHJcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XHJcbmltcG9ydCB7XHJcbiAgc2VsZWN0b3JzLFxyXG4gIG9wZW5Gb3JtUHJvZmlsZSxcclxuLy8gIGlucHV0TmFtZSxcclxuLy8gIGlucHV0T2N1cGF0aW9uLFxyXG4gIGZvcm1FZGl0LFxyXG4gIGZvcm1JbWFnZSxcclxuICBmb3JtUHJvZmlsZUltYWdlLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlUHJvZmVzc2lvbixcclxuICBwcm9maWxlSW1hZ2UsXHJcbiAgb3BlbkNhcmRCdXR0b24sXHJcbiAgYWRkQ2FyZFN1Ym1pdEJ1dHRvbixcclxuICBkZWxldGVDYXJkU3VibWl0QnV0dG9uLFxyXG4gIGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLFxyXG4gIHByb2ZpbGVJbWFnZVN1Ym1pdEJ1dHRvbixcclxuICBwcm9maWxlSW1hZ2VPdmVybGF5LFxyXG59IGZyb20gJy4uL2NvbXBvbmVudHMvdXRpbHMuanMnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL2NhcmRzLmpzJztcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9mb3JtVmFsaWRhdG9ycy5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvcG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBQb3B1cERlbGV0ZUltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvcG9wdXBEZWxldGVJbWFnZXMuanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9wb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvc2VjdGlvbnMuanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy91c2VySW5mb3MuanMnO1xyXG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpcy5qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzX2NvaG9ydF8wNCcsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogJzdiODkyMTZlLTAzZjYtNDI0NC04MjM1LTkzMGViNDY0YzIzMScsXHJcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXQsIHNlbGVjdG9ycyk7XHJcbmNvbnN0IGltYWdlUG9wdXBWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtSW1hZ2UsIHNlbGVjdG9ycyk7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZVBvcHVwVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybVByb2ZpbGVJbWFnZSwgc2VsZWN0b3JzKTtcclxuXHJcbnByb2ZpbGVQb3B1cFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmltYWdlUG9wdXBWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5wcm9maWxlSW1hZ2VQb3B1cFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5leHBvcnQgY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfcHJldmlld19pbWFnZScpO1xyXG5wcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX2VkaXRfcHJvZmlsZScsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIGFwaVxyXG4gICAgICAuc2V0VXNlckluZm8oe25hbWU6IGRhdGEubmFtZSwgYWJvdXQ6IGRhdGEuYWJvdXR9KVxyXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcclxuICAgICAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7dXNlcm5hbWU6IHJlc3BvbnNlLm5hbWUsIHVzZXJvY3VwYXRpb246IHJlc3BvbnNlLmFib3V0fSk7XHJcblxyXG4gICAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfSxcclxuICBzdWJtaXRCdXR0b246IGVkaXRQcm9maWxlU3VibWl0QnV0dG9uLFxyXG59KTtcclxuXHJcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVVc2VyID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogcHJvZmlsZVRpdGxlLFxyXG4gIHVzZXJPY3VwYXRpb246IHByb2ZpbGVQcm9mZXNzaW9uLFxyXG4gIHVzZXJBdmF0YXI6IHByb2ZpbGVJbWFnZSxcclxufSk7XHJcblxyXG5vcGVuRm9ybVByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgZWRpdFBvcHVwLm9wZW4oKTtcclxuICBwcm9maWxlUG9wdXBWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuYXBpXHJcbiAgLmdldFVzZXJJbmZvKClcclxuICAudGhlbigocmVzKSA9PiB7XHJcbiAgICBwcm9maWxlVXNlci5zZXRVc2VySW5mbyh7dXNlcm5hbWU6IHJlcy5uYW1lLCB1c2Vyb2N1cGF0aW9uOiByZXMuYWJvdXR9KTtcclxuICAgIHByb2ZpbGVVc2VyLnNldFVzZXJBdmF0YXIocmVzLmF2YXRhcik7XHJcbiAgICBwcm9maWxlVXNlci51c2VySWQgPSByZXMuX2lkO1xyXG4gIH0pXHJcbiAgLnRoZW4oKCkgPT4ge1xyXG4gICAgYXBpXHJcbiAgICAgIC5nZXRDYXJkTGlzdCgpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBjb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpdGVtczogcmVzLFxyXG4gICAgICAgICAgICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgY2FyZFNlY3Rpb24uYWRkQ2FyZHMoY2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgICcuY2FyZHNfX2NvbnRhaW5lcidcclxuICAgICAgICApO1xyXG4gICAgICAgIGNhcmRTZWN0aW9uLnJlbmRlcmVyKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgICAgICAgIHBvcHVwU2VsZWN0b3I6ICcucG9wdXBfYWRkX2NhcmQnLFxyXG4gICAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgLmFkZENhcmQoe25hbWU6IGRhdGEudGl0bGUsIGxpbms6IGRhdGFbJ2ltYWdlLWxpbmsnXX0pXHJcbiAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICAgICAgICAgICAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0obmV3Q2FyZEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgc3VibWl0QnV0dG9uOiBhZGRDYXJkU3VibWl0QnV0dG9uLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhZGRDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICAgICAgb3BlbkNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG4gICAgICAgICAgaW1hZ2VQb3B1cFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuY29uc3QgcHJvZmlsZUltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF9pbWFnZV9wcm9maWxlJyxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgYXZhdGFyID0gZGF0YVsnaW1hZ2UtbGluayddO1xyXG4gICAgYXBpXHJcbiAgICAgIC5zZXRVc2VyQXZhdGFyKGF2YXRhcilcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIHByb2ZpbGVVc2VyLnNldFVzZXJBdmF0YXIoYXZhdGFyKTtcclxuICAgICAgICBwcm9maWxlSW1hZ2VQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgfSxcclxuICBzdWJtaXRCdXR0b246IHByb2ZpbGVJbWFnZVN1Ym1pdEJ1dHRvbixcclxufSk7XHJcblxyXG5wcm9maWxlSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxucHJvZmlsZUltYWdlT3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwcm9maWxlSW1hZ2VQb3B1cC5vcGVuKCk7XHJcbiAgcHJvZmlsZUltYWdlUG9wdXBWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cERlbGV0ZUltYWdlKHtcclxuICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX2RlbGV0ZV9jYXJkJyxcclxuICBzdWJtaXRCdXR0b246IGRlbGV0ZUNhcmRTdWJtaXRCdXR0b24sXHJcbn0pO1xyXG5cclxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGRhdGEsXHJcbiAgICAgIGhhbmRsZUNhcmRDbGljazogKHtuYW1lLCBsaW5rfSkgPT4ge1xyXG4gICAgICAgIHByZXZpZXdQb3B1cC5vcGVuKHtuYW1lLCBsaW5rfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoe2lkfSkgPT4ge1xyXG4gICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLnJlbW92ZUNhcmQoaWQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICAgICAgICBuZXdDYXJkLl9kZWxldGVCdXR0b24oKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVMaWtlQWRkOiAoe2lkfSkgPT4ge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLmFkZExpa2UoaWQpXHJcbiAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIG5ld0NhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgbmV3Q2FyZC5hZGRIZWFydCgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlTGlrZURlbGV0ZTogKHtpZH0pID0+IHtcclxuICAgICAgICBhcGlcclxuICAgICAgICAgIC5yZW1vdmVMaWtlKGlkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBuZXdDYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICAgIG5ld0NhcmQucmVtb3ZlSGVhcnQoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHVzZXJJZDogcHJvZmlsZVVzZXIudXNlcklkLFxyXG4gICAgfSxcclxuICAgICcuY2FyZC10ZW1wbGF0ZSdcclxuICApO1xyXG4gIHJldHVybiBuZXdDYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHtiYXNlVXJsLCBoZWFkZXJzfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIC8vIF9yZXR1cm5SZXMgZXMgdW5hIGZ1bmNpw7NuIMO6dGlsIHBhcmEgbWFuZWphciBlcnJvcmVzIHkgcHJvY2VzYXIgbG9zIGRhdG9zIHJlY2liaWRvcyBkZSBsYXMgc29saWNpdHVkZXMgZGUgQVBJXHJcbiAgX3JldHVyblJlcyhyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL2dldENhcmRMaXN0IGhhcmEgdW5hIHBldGljacOzbiBwYXJhIG9idGVuZXIgbGFzIHRhcmpldGFzIGluaWNpYWxlc1xyXG4gIGdldENhcmRMaXN0KCkge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge1xyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9nZXRVc2VySW5mbyBoYXJhIHVuYSBwZXRpY2nDs24gcGFyYSBvYnRlbmVyIGxvcyBkYXRvcyBkZWwgdXN1YXJpbyBhY3R1YWxcclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vc2V0VXNlckluZm8gaGFyYSB1bmEgcGV0aWNpw7NuIFBBVENIIGFsIGVuZHBvaW50IHBhcmEgYWN0dWFsaXphciBsb3MgZGF0b3MgZGVsIHVzdWFyaW8gYWN0dWFsIGNvbiBlbCBub21icmUgeSBkZXNjcmlwY2nDs24gZXNwZWNpZmljYWRvcy5cclxuICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgICBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcclxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgYWJvdXQsXHJcbiAgICAgICAgfSksXHJcbiAgICAgIH0pXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy9ib3JyYXIgZXN0ZSBjYXRjaCBsdWVnbyB4ZFxyXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vYWRkQ2FyZCBoYXJhIHVuYSBwZXRpY2nDs24gUE9TVCBhbCBlbmRwb2ludCBwYXJhIGNyZWFyIHVuYSBudWV2YSB0YXJqZXRhIGNvbiBlbCBub21icmUgeSBsaW5rIGVzcGVjaWZpY2Fkb3MuXHJcbiAgYWRkQ2FyZCh7bmFtZSwgbGlua30pIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcycsIHtcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9yZW1vdmVDYXJkIGhhcmEgdW5hIHBldGljacOzbiBERUxFVEUgYWwgZW5kcG9pbnQgcGFyYSBlbGltaW5hciBsYSB0YXJqZXRhIGNvbiBlbCBpZCBlc3BlY2lmaWNhZG8uXHJcbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy8nICsgY2FyZElkLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL3NldFVzZXJBdmF0YXIgaGFyYSB1bmEgcGV0aWNpw7NuIFBBVENIIGFsIGVuZHBvaW50IHBhcmEgYWN0dWFsaXphciBlbCBhdmF0YXIgZGVsIHVzdWFyaW8gYWN0dWFsIGNvbiBlbCBsaW5rIGVzcGVjaWZpY2Fkby5cclxuICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xyXG4gICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL3VzZXJzL21lL2F2YXRhcicsIHtcclxuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXIsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy9hZGRMaWtlIGhhcmEgdW5hIHBldGljacOzbiBQVVQgYWwgZW5kcG9pbnQgcGFyYSBhZ3JlZ2FyIHVuIGxpa2UgYSBsYSB0YXJqZXRhIGNvbiBlbCBpZCBlc3BlY2lmaWNhZG8uXHJcbiAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgY2FyZElkLCB7XHJcbiAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvL3JlbW92ZUxpa2UgaGFyYSB1bmEgcGV0aWNpw7NuIERFTEVURSBhbCBlbmRwb2ludCBwYXJhIGVsaW1pbmFyIGVsIGxpa2UgYSBsYSB0YXJqZXRhIGNvbiBlbCBpZCBlc3BlY2lmaWNhZG8uXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgY2FyZElkLCB7XHJcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJvcGVuRm9ybVByb2ZpbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvcGVuQ2FyZEJ1dHRvbiIsImZvcm1FZGl0IiwiZm9ybUltYWdlIiwiZm9ybVByb2ZpbGVJbWFnZSIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVQcm9mZXNzaW9uIiwicHJvZmlsZUltYWdlIiwiZGVsZXRlQ2FyZFN1Ym1pdEJ1dHRvbiIsImVkaXRQcm9maWxlU3VibWl0QnV0dG9uIiwicHJvZmlsZUltYWdlU3VibWl0QnV0dG9uIiwicHJvZmlsZUltYWdlT3ZlcmxheSIsImFkZENhcmRTdWJtaXRCdXR0b24iLCJzZWxlY3RvcnMiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJ0ZW1wbGF0ZSIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VBZGQiLCJoYW5kbGVMaWtlRGVsZXRlIiwidXNlcklkIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZSIsIl9pZCIsIl9saWtlc0NvdW50IiwibGlrZXMiLCJsZW5ndGgiLCJfb3duZXJJZCIsIm93bmVyIiwiX3VzZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VBZGQiLCJfaGFuZGxlTGlrZURlbGV0ZSIsIl9saWtlc0FycmF5IiwiX2NhcmRMaWtlcyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJoZWFydEJ1dHRvbiIsIl9lbGVtZW50IiwiaGVhcnROdW1iZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImNsb3Nlc3QiLCJyZXNBcnJheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzb21lIiwibGlrZSIsImlkIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEltYWdlIiwic3JjIiwic2V0QXR0cmlidXRlIiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsImZvckVhY2giLCJpbnB1dCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfZm9ybUVsZW1lbnQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2J1dHRvbkVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJ2YWx1ZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1Ym1pdEJ1dHRvbiIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdEJ1dHRvbiIsInJlbmRlckxvYWRpbmciLCJyZXNldCIsIl9mb3JtVmFsdWVzIiwiaXNMb2FkaW5nIiwiZGF0YXNldCIsInRleHRjb250ZW50IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBEZWxldGVJbWFnZSIsImFjdGlvbiIsIlBvcHVwV2l0aEltYWdlIiwiX2ltYWdlIiwiX3RpdGxlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlVzZXJJbmZvIiwidXNlck5hbWUiLCJ1c2VyT2N1cGF0aW9uIiwidXNlckF2YXRhciIsIl91c2VyTmFtZSIsIl91c2VyT2N1cGF0aW9uIiwiX3VzZXJJZCIsIl91c2VyQXZhdGFyIiwidXNlcm5hbWUiLCJ1c2Vyb2N1cGF0aW9uIiwiYXZhdGFyIiwiYXBpIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9yZXR1cm5SZXMiLCJhYm91dCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2FyZElkIiwiYXV0aG9yaXphdGlvbiIsInByb2ZpbGVQb3B1cFZhbGlkYXRvciIsImltYWdlUG9wdXBWYWxpZGF0b3IiLCJwcm9maWxlSW1hZ2VQb3B1cFZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2aWV3UG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsImVkaXRQb3B1cCIsInNldFVzZXJJbmZvIiwicmVzcG9uc2UiLCJwcm9maWxlVXNlciIsIm9wZW4iLCJyZXNldFZhbGlkYXRpb24iLCJnZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJnZXRDYXJkTGlzdCIsImNhcmRTZWN0aW9uIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkQ2FyZHMiLCJhZGRDYXJkUG9wdXAiLCJhZGRDYXJkIiwidGl0bGUiLCJuZXdDYXJkRWxlbWVudCIsImFkZEl0ZW0iLCJwcm9maWxlSW1hZ2VQb3B1cCIsImRlbGV0ZUNhcmRQb3B1cCIsIm5ld0NhcmQiLCJzZXRTdWJtaXRBY3Rpb24iLCJyZW1vdmVDYXJkIiwiX2RlbGV0ZUJ1dHRvbiIsImFkZExpa2UiLCJ1cGRhdGVMaWtlcyIsImFkZEhlYXJ0IiwicmVtb3ZlTGlrZSIsInJlbW92ZUhlYXJ0IiwiZ2VuZXJhdGVDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==